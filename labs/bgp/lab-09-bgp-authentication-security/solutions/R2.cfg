!
! R2 Solution Configuration
! BGP Lab 09 - BGP Authentication & Security
!
hostname R2
!
interface Loopback0
 ip address 172.16.2.2 255.255.255.255
 no shutdown
!
interface Loopback1
 ip address 198.51.100.1 255.255.255.0
 no shutdown
!
interface Loopback2
 ip address 198.51.101.1 255.255.255.0
 no shutdown
!
interface Loopback3
 ip address 198.51.102.1 255.255.255.0
 no shutdown
!
interface FastEthernet0/0
 description Link to R1 (Enterprise)
 ip address 10.1.12.2 255.255.255.252
 no shutdown
!
interface FastEthernet1/0
 description Link to R3 (ISP-B)
 ip address 10.1.23.1 255.255.255.252
 no shutdown
!
! ============================================================
! Tasks 1, 2, 3: MD5 auth + TTL security + max-prefix
! ============================================================
router bgp 65002
 bgp router-id 172.16.2.2
 !
 ! Task 1: BGP_LAB_KEY matches R1's key for this session
 neighbor 10.1.12.1 remote-as 65001
 neighbor 10.1.12.1 password BGP_LAB_KEY
 neighbor 10.1.12.1 ttl-security hops 1
 neighbor 10.1.12.1 maximum-prefix 100 80
 neighbor 10.1.12.1 soft-reconfiguration inbound
 !
 ! ISP_PEER_KEY for the ISP-A to ISP-B transit peering
 neighbor 10.1.23.2 remote-as 65003
 neighbor 10.1.23.2 password ISP_PEER_KEY
 neighbor 10.1.23.2 ttl-security hops 1
 neighbor 10.1.23.2 maximum-prefix 500 80
 !
 network 172.16.2.2 mask 255.255.255.255
 network 198.51.100.0 mask 255.255.255.0
 network 198.51.101.0 mask 255.255.255.0
 network 198.51.102.0 mask 255.255.255.0
!
line con 0
 logging synchronous
 exec-timeout 0 0
!
end
